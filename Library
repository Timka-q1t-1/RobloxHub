local MM={}MM.__index=MM local DC={background=Color3.fromRGB(30,30,40),sectionBackground=Color3.fromRGB(25,25,35),topBar=Color3.fromRGB(20,20,30),text=Color3.fromRGB(240,240,240),accent=Color3.fromRGB(0,120,215),toggleOff=Color3.fromRGB(80,80,80),toggleOn=Color3.fromRGB(0,180,80),sliderBackground=Color3.fromRGB(60,60,70),sliderFill=Color3.fromRGB(0,120,215),textBoxBackground=Color3.fromRGB(40,40,50),bindButton=Color3.fromRGB(90,90,120)}function MM.new(t,s,p)local self=setmetatable({},MM)self.title=t or"Modern Menu"self.size=s or UDim2.new(0,400,0,500)self.position=p or UDim2.new(0.5,-200,0.5,-250)self.colors=table.clone(DC)self.sections={}self.currentSection=nil self.settingsOpen=false self.controls={}self.colorPickers={}self.modalWindowOpen=false self.waitingForBind=nil self:createMainFrame()self:createTopBar()self:createSectionsFrame()self:createContentFrame()self:createSettingsMenu()self.inputConnection=game:GetService("UserInputService").InputBegan:Connect(function(i)if self.waitingForBind and not self.modalWindowOpen then if i.UserInputType==Enum.UserInputType.Keyboard then self.waitingForBind.callback(i.KeyCode)self.waitingForBind.button.Text=tostring(i.KeyCode):gsub("Enum.KeyCode.","")self.waitingForBind=nil end end end)return self end function MM:createMainFrame()self.mainFrame=Instance.new("ScreenGui")self.mainFrame.Name="ModernMenu"self.mainFrame.ResetOnSpawn=false self.mainFrame.ZIndexBehavior=Enum.ZIndexBehavior.Global self.mainFrame.IgnoreGuiInset=true local f=Instance.new("Frame")f.Name="MainFrame"f.Size=self.size f.Position=self.position f.BackgroundColor3=self.colors.background f.BorderSizePixel=0 f.ClipsDescendants=true f.Parent=self.mainFrame local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0,8)c.Parent=f self.mainFrame.Parent=game:GetService("Players").LocalPlayer.PlayerGui self.mainFrameInstance=f end function MM:createTopBar()local t=Instance.new("Frame")t.Name="TopBar"t.Size=UDim2.new(1,0,0,30)t.BackgroundColor3=self.colors.topBar t.BorderSizePixel=0 t.Parent=self.mainFrameInstance local l=Instance.new("TextLabel")l.Name="Title"l.Size=UDim2.new(0.6,0,1,0)l.Position=UDim2.new(0.05,0,0,0)l.BackgroundTransparency=1 l.Text=self.title l.TextColor3=self.colors.text l.TextXAlignment=Enum.TextXAlignment.Left l.Font=Enum.Font.GothamSemibold l.TextSize=14 l.Parent=t local b=Instance.new("TextButton")b.Name="CloseButton"b.Size=UDim2.new(0,30,0,30)b.Position=UDim2.new(1,-30,0,0)b.BackgroundTransparency=1 b.Text="X"b.TextColor3=self.colors.text b.Font=Enum.Font.GothamBold b.TextSize=14 b.Parent=t local s=Instance.new("TextButton")s.Name="SettingsButton"s.Size=UDim2.new(0,30,0,30)s.Position=UDim2.new(1,-60,0,0)s.BackgroundTransparency=1 s.Text="âš™"s.TextColor3=self.colors.text s.Font=Enum.Font.GothamBold s.TextSize=14 s.Parent=t local d,i,p,s local function u(i)local d=i.Position-p self.mainFrameInstance.Position=UDim2.new(s.X.Scale,s.X.Offset+d.X,s.Y.Scale,s.Y.Offset+d.Y)end t.InputBegan:Connect(function(i)if i.UserInputType==Enum.UserInputType.MouseButton1 then d=true p=i.Position s=self.mainFrameInstance.Position i.Changed:Connect(function()if i.UserInputState==Enum.UserInputState.End then d=false end end)end end)t.InputChanged:Connect(function(i)if i.UserInputType==Enum.UserInputType.MouseMovement then i=i end end)game:GetService("UserInputService").InputChanged:Connect(function(i)if i==i and d then u(i)end end)b.MouseButton1Click:Connect(function()self.mainFrame.Enabled=not self.mainFrame.Enabled end)s.MouseButton1Click:Connect(function()self:toggleSettings()end)end function MM:createSectionsFrame()local s=Instance.new("Frame")s.Name="SectionsFrame"s.Size=UDim2.new(0.3,0,1,-30)s.Position=UDim2.new(0,0,0,30)s.BackgroundColor3=self.colors.sectionBackground s.BorderSizePixel=0 s.Parent=self.mainFrameInstance local l=Instance.new("UIListLayout")l.Padding=UDim.new(0,5)l.SortOrder=Enum.SortOrder.LayoutOrder l.Parent=s self.sectionsFrame=s end function MM:createContentFrame()local c=Instance.new("ScrollingFrame")c.Name="ContentFrame"c.Size=UDim2.new(0.7,0,1,-30)c.Position=UDim2.new(0.3,0,0,30)c.BackgroundTransparency=1 c.BorderSizePixel=0 c.ScrollBarThickness=3 c.ScrollBarImageColor3=self.colors.accent c.Parent=self.mainFrameInstance local l=Instance.new("UIListLayout")l.Padding=UDim.new(0,10)l.SortOrder=Enum.SortOrder.LayoutOrder l.Parent=c local p=Instance.new("UIPadding")p.PaddingTop=UDim.new(0,10)p.PaddingLeft=UDim.new(0,10)p.PaddingRight=UDim.new(0,10)p.Parent=c self.contentFrame=c end function MM:createSettingsMenu()self.settingsFrame=Instance.new("ScreenGui")self.settingsFrame.Name="ModernMenuSettings"self.settingsFrame.ResetOnSpawn=false self.settingsFrame.ZIndexBehavior=Enum.ZIndexBehavior.Global self.settingsFrame.IgnoreGuiInset=true local f=Instance.new("Frame")f.Name="SettingsFrame"f.Size=UDim2.new(0,300,0,400)f.Position=UDim2.new(0.5,-150,0.5,-200)f.BackgroundColor3=self.colors.background f.BorderSizePixel=0 f.ClipsDescendants=true f.Visible=false f.Parent=self.settingsFrame local b=Instance.new("TextButton")b.Name="BackgroundBlocker"b.Size=UDim2.new(10,0,10,0)b.Position=UDim2.new(-5,0,-5,0)b.BackgroundColor3=Color3.new(0,0,0)b.BackgroundTransparency=0.5 b.BorderSizePixel=0 b.Text=""b.ZIndex=0 b.Visible=false b.Parent=self.settingsFrame local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0,8)c.Parent=f local t=Instance.new("Frame")t.Name="TopBar"t.Size=UDim2.new(1,0,0,30)t.BackgroundColor3=self.colors.topBar t.BorderSizePixel=0 t.Parent=f local d,i,p,s local function u(i)local d=i.Position-p f.Position=UDim2.new(s.X.Scale,s.X.Offset+d.X,s.Y.Scale,s.Y.Offset+d.Y)end t.InputBegan:Connect(function(i)if i.UserInputType==Enum.UserInputType.MouseButton1 then d=true p=i.Position s=f.Position i.Changed:Connect(function()if i.UserInputState==Enum.UserInputState.End then d=false end end)end end)t.InputChanged:Connect(function(i)if i.UserInputType==Enum.UserInputType.MouseMovement then i=i end end)game:GetService("UserInputService").InputChanged:Connect(function(i)if i==i and d then u(i)end end)local l=Instance.new("TextLabel")l.Name="Title"l.Size=UDim2.new(0.6,0,1,0)l.Position=UDim2.new(0.05,0,0,0)l.BackgroundTransparency=1 l.Text="Menu Settings"l.TextColor3=self.colors.text l.TextXAlignment=Enum.TextXAlignment.Left l.Font=Enum.Font.GothamSemibold l.TextSize=14 l.Parent=t local b=Instance.new("TextButton")b.Name="CloseButton"b.Size=UDim2.new(0,30,0,30)b.Position=UDim2.new(1,-30,0,0)b.BackgroundTransparency=1 b.Text="X"b.TextColor3=self.colors.text b.Font=Enum.Font.GothamBold b.TextSize=14 b.Parent=t local c=Instance.new("ScrollingFrame")c.Name="ContentFrame"c.Size=UDim2.new(1,0,1,-30)c.Position=UDim2.new(0,0,0,30)c.BackgroundTransparency=1 c.BorderSizePixel=0 c.ScrollBarThickness=3 c.ScrollBarImageColor3=self.colors.accent c.Parent=f local l=Instance.new("UIListLayout")l.Padding=UDim.new(0,10)l.SortOrder=Enum.SortOrder.LayoutOrder l.Parent=c local p=Instance.new("UIPadding")p.PaddingTop=UDim.new(0,10)p.PaddingLeft=UDim.new(0,10)p.PaddingRight=UDim.new(0,10)p.Parent=c for n,v in pairs(DC)do local c=self:createColorPicker(n,v,c)self.colorPickers[n]=c end b.MouseButton1Click:Connect(function()self:toggleSettings()end)b.MouseButton1Click:Connect(function()self:toggleSettings()end)self.settingsFrame.Parent=game:GetService("Players").LocalPlayer.PlayerGui self.settingsContentFrame=c end function MM:createColorPicker(n,d,p)local f=Instance.new("Frame")f.Name=n.."ColorPicker"f.Size=UDim2.new(1,-20,0,30)f.BackgroundTransparency=1 f.Parent=p local l=Instance.new("TextLabel")l.Name="Label"l.Size=UDim2.new(0.4,0,1,0)l.BackgroundTransparency=1 l.Text=n:gsub("^%l",string.upper)l.TextColor3=self.colors.text l.TextXAlignment=Enum.TextXAlignment.Left l.Font=Enum.Font.Gotham l.TextSize=12 l.Parent=f local b=Instance.new("TextButton")b.Name="ColorBox"b.Size=UDim2.new(0.3,0,0.8,0)b.Position=UDim2.new(0.4,0,0.1,0)b.BackgroundColor3=self.colors[n]or d b.BorderSizePixel=0 b.Text=""b.Parent=f local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0,4)c.Parent=b b.MouseButton1Click:Connect(function()if self.currentColorPicker then self.currentColorPicker:Destroy()self.currentColorPicker=nil end local c=Instance.new("Frame")c.Name="ColorPickerPopup"c.Size=UDim2.new(0,200,0,200)c.Position=UDim2.new(0.5,-100,0.5,-100)c.BackgroundColor3=self.colors.background c.BorderSizePixel=0 c.Parent=self.settingsFrame local d=Instance.new("Frame")d.Name="DragFrame"d.Size=UDim2.new(1,0,0,20)d.BackgroundTransparency=1 d.Parent=c local g,i,p,s local function u(i)local d=i.Position-p c.Position=UDim2.new(s.X.Scale,s.X.Offset+d.X,s.Y.Scale,s.Y.Offset+d.Y)end d.InputBegan:Connect(function(i)if i.UserInputType==Enum.UserInputType.MouseButton1 then g=true i=i.Position s=c.Position i.Changed:Connect(function()if i.UserInputState==Enum.UserInputState.End then g=false end end)end end)d.InputChanged:Connect(function(i)if i.UserInputType==Enum.UserInputType.MouseMovement then i=i end end)game:GetService("UserInputService").InputChanged:Connect(function(i)if i==i and g then u(i)end end)local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0,8)c.Parent=c local u=Instance.new("Frame")u.Name="CurrentColor"u.Size=UDim2.new(0.8,0,0.2,0)u.Position=UDim2.new(0.1,0,0.3,0)u.BackgroundColor3=b.BackgroundColor3 u.BorderSizePixel=0 u.Parent=c local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0,4)c.Parent=u local r=self:createColorSlider("Red",0,c,UDim2.new(0.1,0,0.5,0))local g=self:createColorSlider("Green",1,c,UDim2.new(0.1,0,0.7,0))local b=self:createColorSlider("Blue",2,c,UDim2.new(0.1,0,0.9,0))local function u()local n=Color3.new(r.currentValue,g.currentValue,b.currentValue)u.BackgroundColor3=n b.BackgroundColor3=n self:setColor(n,n)end local r,g,b=b.BackgroundColor3.r,b.BackgroundColor3.g,b.BackgroundColor3.b r:setValue(r)g:setValue(g)b:setValue(b)r.callback=u g.callback=u b.callback=u local b=Instance.new("TextButton")b.Name="CloseButton"b.Size=UDim2.new(0,30,0,30)b.Position=UDim2.new(1,-30,0,0)b.BackgroundTransparency=1 b.Text="X"b.TextColor3=self.colors.text b.Font=Enum.Font.GothamBold b.TextSize=14 b.Parent=c b.MouseButton1Click:Connect(function()c:Destroy()self.currentColorPicker=nil end)self.currentColorPicker=c end)return f end function MM:createColorSlider(l,i,p,o)local f=Instance.new("Frame")f.Name=l.."Slider"f.Size=UDim2.new(0.8,0,0.1,0)f.Position=o f.BackgroundTransparency=1 f.Parent=p local n=Instance.new("TextLabel")n.Name="Label"n.Size=UDim2.new(0.3,0,1,0)n.BackgroundTransparency=1 n.Text=l n.TextColor3=self.colors.text n.TextXAlignment=Enum.TextXAlignment.Left n.Font=Enum.Font.Gotham n.TextSize=12 n.Parent=f local s=Instance.new("Frame")s.Name="SliderBackground"s.Size=UDim2.new(0.5,0,0.6,0)s.Position=UDim2.new(0.3,0,0.2,0)s.BackgroundColor3=Color3.fromRGB(60,60,70)s.BorderSizePixel=0 s.Parent=f local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0.5,0)c.Parent=s local f=Instance.new("Frame")f.Name="SliderFill"f.Size=UDim2.new(0.5,0,1,0)f.BackgroundColor3=i==0 and Color3.fromRGB(255,0,0)or i==1 and Color3.fromRGB(0,255,0)or Color3.fromRGB(0,0,255)f.BorderSizePixel=0 f.Parent=s local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0.5,0)c.Parent=f local v=Instance.new("TextLabel")v.Name="ValueLabel"v.Size=UDim2.new(0.2,0,1,0)v.Position=UDim2.new(0.8,5,0,0)v.BackgroundTransparency=1 v.Text="0"v.TextColor3=self.colors.text v.TextXAlignment=Enum.TextXAlignment.Left v.Font=Enum.Font.Gotham v.TextSize=12 v.Parent=f local s={frame=f,currentValue=0,callback=nil,setValue=function(self,v)self.currentValue=v f.Size=UDim2.new(v,0,1,0)v.Text=string.format("%.2f",v)end}local d=false local function u(i)local x=(i.Position.X-s.AbsolutePosition.X)/s.AbsoluteSize.X x=math.clamp(x,0,1)s:setValue(x)if s.callback then s.callback()end end s.InputBegan:Connect(function(i)if i.UserInputType==Enum.UserInputType.MouseButton1 then d=true u(i)end end)s.InputEnded:Connect(function(i)if i.UserInputType==Enum.UserInputType.MouseButton1 then d=false end end)game:GetService("UserInputService").InputChanged:Connect(function(i)if d and i.UserInputType==Enum.UserInputType.MouseMovement then u(i)end end)return s end function MM:toggleSettings()self.settingsOpen=not self.settingsOpen self.settingsFrame.SettingsFrame.Visible=self.settingsOpen self.settingsFrame.BackgroundBlocker.Visible=self.settingsOpen self.modalWindowOpen=self.settingsOpen end function MM:addSection(n)local s=Instance.new("TextButton")s.Name=n.."Section"s.Size=UDim2.new(1,-10,0,30)s.Position=UDim2.new(0,5,0,5+(#self.sections*35))s.BackgroundColor3=self.colors.background s.BorderSizePixel=0 s.Text=n s.TextColor3=self.colors.text s.Font=Enum.Font.Gotham s.TextSize=12 s.Parent=self.sectionsFrame local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0,4)c.Parent=s local s={name=n,buttons={}}table.insert(self.sections,s)if#self.sections==1 then self:setSection(n)end s.MouseButton1Click:Connect(function()self:setSection(n)end)return s end function MM:setSection(n)for _,s in ipairs(self.sections)do if s.name==n then self.currentSection=s self:updateContent()break end end end function MM:updateContent()for _,c in pairs(self.controls)do if c and c.Parent==self.contentFrame then c:Destroy()end end self.controls={}if not self.currentSection then return end for _,b in ipairs(self.currentSection.buttons)do local c if b.type=="TitleSection"then c=self:createTitleSection(b.text,b.id)elseif b.type=="ActiveButton"then c=self:createActiveButton(b.text,b.callback,b.id)elseif b.type=="ToggleButton"then c=self:createToggleButton(b.text,b.default,b.callback,b.id,b.currentState)elseif b.type=="SliderButton"then c=self:createSliderButton(b.text,b.min,b.max,b.default,b.callback,b.id,b.currentValue)elseif b.type=="TextBoxButton"then c=self:createTextBoxButton(b.text,b.placeholder,b.callback,b.id,b.currentText)end if c then table.insert(self.controls,c)c.Parent=self.contentFrame end end end function MM:createTitleSection(t,i)i=i or"TitleSection_"..t local f=Instance.new("Frame")f.Name=i f.Size=UDim2.new(1,-20,0,30)f.BackgroundTransparency=1 local l=Instance.new("TextLabel")l.Name="Label"l.Size=UDim2.new(1,0,1,0)l.BackgroundTransparency=1 l.Text=t l.TextColor3=self.colors.text l.TextXAlignment=Enum.TextXAlignment.Left l.Font=Enum.Font.GothamSemibold l.TextSize=14 l.Parent=f return f end function MM:TitleSection(t)local i="TitleSection_"..t if not self.currentSection then return end table.insert(self.currentSection.buttons,{type="TitleSection",text=t,id=i})if self.currentSection.name==self.currentSection then local c=self:createTitleSection(t,i)table.insert(self.controls,c)c.Parent=self.contentFrame end return i end function MM:createActiveButton(t,c,i)i=i or"ActiveButton_"..t local b=Instance.new("TextButton")b.Name=i b.Size=UDim2.new(1,-20,0,30)b.BackgroundColor3=self.colors.accent b.BorderSizePixel=0 b.Text=t b.TextColor3=self.colors.text b.Font=Enum.Font.Gotham b.TextSize=12 local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0,4)c.Parent=b b.MouseButton1Click:Connect(function()if c then c()end end)return b end function MM:ActiveButton(t,c)local i="ActiveButton_"..t if not self.currentSection then return end table.insert(self.currentSection.buttons,{type="ActiveButton",text=t,callback=c,id=i})if self.currentSection.name==self.currentSection then local c=self:createActiveButton(t,c,i)table.insert(self.controls,c)c.Parent=self.contentFrame end return i end function MM:createToggleButton(t,d,c,i,s)i=i or"ToggleButton_"..t s=s or d or false local f=Instance.new("Frame")f.Name=i f.Size=UDim2.new(1,-20,0,30)f.BackgroundTransparency=1 local l=Instance.new("TextLabel")l.Name="Label"l.Size=UDim2.new(0.7,0,1,0)l.BackgroundTransparency=1 l.Text=t l.TextColor3=self.colors.text l.TextXAlignment=Enum.TextXAlignment.Left l.Font=Enum.Font.Gotham l.TextSize=12 l.Parent=f local t=Instance.new("Frame")t.Name="Toggle"t.Size=UDim2.new(0.2,0,0.6,0)t.Position=UDim2.new(0.75,0,0.2,0)t.BackgroundColor3=s and self.colors.toggleOn or self.colors.toggleOff t.BorderSizePixel=0 t.Parent=f local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0.5,0)c.Parent=t f.InputBegan:Connect(function(i)if i.UserInputType==Enum.UserInputType.MouseButton1 then s=not s t.BackgroundColor3=s and self.colors.toggleOn or self.colors.toggleOff for _,b in ipairs(self.currentSection.buttons)do if b.id==i then b.currentState=s break end end if c then c(s)end end end)return f end function MM:ToggleButton(t,d,c)local i="ToggleButton_"..t if not self.currentSection then return end table.insert(self.currentSection.buttons,{type="ToggleButton",text=t,default=d,callback=c,id=i,currentState=d})if self.currentSection.name==self.currentSection then local c=self:createToggleButton(t,d,c,i,d)table.insert(self.controls,c)c.Parent=self.contentFrame end return i end function MM:createSliderButton(t,m,x,d,c,i,v)i=i or"SliderButton_"..t v=v or d or m local f=Instance.new("Frame")f.Name=i f.Size=UDim2.new(1,-20,0,50)f.BackgroundTransparency=1 local l=Instance.new("TextLabel")l.Name="Label"l.Size=UDim2.new(1,0,0.4,0)l.BackgroundTransparency=1 l.Text=t l.TextColor3=self.colors.text l.TextXAlignment=Enum.TextXAlignment.Left l.Font=Enum.Font.Gotham l.TextSize=12 l.Parent=f local s=Instance.new("Frame")s.Name="SliderBackground"s.Size=UDim2.new(1,0,0.3,0)s.Position=UDim2.new(0,0,0.5,0)s.BackgroundColor3=self.colors.sliderBackground s.BorderSizePixel=0 s.Parent=f local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0.5,0)c.Parent=s local f=Instance.new("Frame")f.Name="SliderFill"f.Size=UDim2.new((v-m)/(x-m),0,1,0)f.BackgroundColor3=self.colors.sliderFill f.BorderSizePixel=0 f.Parent=s local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0.5,0)c.Parent=f local v=Instance.new("TextLabel")v.Name="ValueLabel"v.Size=UDim2.new(1,0,0.3,0)v.Position=UDim2.new(0,0,0.8,0)v.BackgroundTransparency=1 v.Text=tostring(v)v.TextColor3=self.colors.text v.TextXAlignment=Enum.TextXAlignment.Right v.Font=Enum.Font.Gotham v.TextSize=12 v.Parent=f local d=false local function u(i)local x=(i.Position.X-s.AbsolutePosition.X)/s.AbsoluteSize.X x=math.clamp(x,0,1)v=m+(x-m)*x v=math.floor(v*100)/100 f.Size=UDim2.new(x,0,1,0)v.Text=tostring(v)for _,b in ipairs(self.currentSection.buttons)do if b.id==i then b.currentValue=v break end end if c then c(v)end end s.InputBegan:Connect(function(i)if i.UserInputType==Enum.UserInputType.MouseButton1 then d=true u(i)end end)s.InputEnded:Connect(function(i)if i.UserInputType==Enum.UserInputType.MouseButton1 then d=false end end)game:GetService("UserInputService").InputChanged:Connect(function(i)if d and i.UserInputType==Enum.UserInputType.MouseMovement then u(i)end end)return f end function MM:SliderButton(t,m,x,d,c)local i="SliderButton_"..t if not self.currentSection then return end table.insert(self.currentSection.buttons,{type="SliderButton",text=t,min=m,max=x,default=d,callback=c,id=i,currentValue=d})if self.currentSection.name==self.currentSection then local c=self:createSliderButton(t,m,x,d,c,i,d)table.insert(self.controls,c)c.Parent=self.contentFrame end return i end function MM:createTextBoxButton(t,p,c,i,o)i=i or"TextBoxButton_"..t o=o or""local f=Instance.new("Frame")f.Name=i f.Size=UDim2.new(1,-20,0,60)f.BackgroundTransparency=1 local l=Instance.new("TextLabel")l.Name="Label"l.Size=UDim2.new(1,0,0.3,0)l.BackgroundTransparency=1 l.Text=t l.TextColor3=self.colors.text l.TextXAlignment=Enum.TextXAlignment.Left l.Font=Enum.Font.Gotham l.TextSize=12 l.Parent=f local n=Instance.new("Frame")n.Name="InputContainer"n.Size=UDim2.new(1,0,0.7,0)n.Position=UDim2.new(0,0,0.3,0)n.BackgroundTransparency=1 n.Parent=f local b=Instance.new("TextBox")b.Name="TextBox"b.Size=UDim2.new(0.7,-5,1,0)b.Position=UDim2.new(0,0,0,0)b.BackgroundColor3=self.colors.textBoxBackground b.BorderSizePixel=0 b.Text=o b.PlaceholderText=p or"Enter text..."b.TextColor3=self.colors.text b.Font=Enum.Font.Gotham b.TextSize=12 b.Parent=n local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0,4)c.Parent=b local p=Instance.new("UIPadding")p.PaddingLeft=UDim.new(0,5)p.PaddingRight=UDim.new(0,5)p.Parent=b local a=Instance.new("TextButton")a.Name="ActivateButton"a.Size=UDim2.new(0.3,0,1,0)a.Position=UDim2.new(0.7,5,0,0)a.BackgroundColor3=self.colors.accent a.BorderSizePixel=0 a.Text="Apply"a.TextColor3=self.colors.text a.Font=Enum.Font.Gotham a.TextSize=12 a.Parent=n local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0,4)c.Parent=a local function u()if c and b.Text~=""then c(b.Text)end end a.MouseButton1Click:Connect(u)b.FocusLost:Connect(function(e)if e then u()end end)return f end function MM:createBindButton(t,d,c,i)i=i or"BindButton_"..t local f=Instance.new("Frame")f.Name=i f.Size=UDim2.new(1,-20,0,30)f.BackgroundTransparency=1 local l=Instance.new("TextLabel")l.Name="Label"l.Size=UDim2.new(0.5,0,1,0)l.BackgroundTransparency=1 l.Text=t l.TextColor3=self.colors.text l.TextXAlignment=Enum.TextXAlignment.Left l.Font=Enum.Font.Gotham l.TextSize=12 l.Parent=f local b=Instance.new("TextButton")b.Name="BindButton"b.Size=UDim2.new(0.4,0,0.8,0)b.Position=UDim2.new(0.55,0,0.1,0)b.BackgroundColor3=self.colors.bindButton b.BorderSizePixel=0 b.Text=tostring(d):gsub("Enum.KeyCode.","")or"None"b.TextColor3=self.colors.text b.Font=Enum.Font.Gotham b.TextSize=12 b.Parent=f local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0,4)c.Parent=b b.MouseButton1Click:Connect(function()if self.modalWindowOpen then return end if self.waitingForBind then self.waitingForBind.button.Text=tostring(self.waitingForBind.currentKey):gsub("Enum.KeyCode.","")end self.waitingForBind={button=b,callback=c,currentKey=d}b.Text="[Press any key]"end)return f end function MM:BindActiveButton(t,d,c)local i="BindActiveButton_"..t if not self.currentSection then return end local c=self:createBindButton(t,d,c,i)table.insert(self.currentSection.buttons,{type="BindActiveButton",text=t,callback=c,id=i,currentKey=d})table.insert(self.controls,c)c.Parent=self.contentFrame return{frame=c,button=c.BindButton,id=i}end function MM:BindToggleButton(t,d,s,c)local i="BindToggleButton_"..t if not self.currentSection then return end local f=Instance.new("Frame")f.Name=i f.Size=UDim2.new(1,-20,0,30)f.BackgroundTransparency=1 local l=Instance.new("TextLabel")l.Name="Label"l.Size=UDim2.new(0.4,0,1,0)l.BackgroundTransparency=1 l.Text=t l.TextColor3=self.colors.text l.TextXAlignment=Enum.TextXAlignment.Left l.Font=Enum.Font.Gotham l.TextSize=12 l.Parent=f local t=Instance.new("Frame")t.Name="Toggle"t.Size=UDim2.new(0.15,0,0.6,0)t.Position=UDim2.new(0.4,0,0.2,0)t.BackgroundColor3=s and self.colors.toggleOn or self.colors.toggleOff t.BorderSizePixel=0 t.Parent=f local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0.5,0)c.Parent=t local b=Instance.new("TextButton")b.Name="BindButton"b.Size=UDim2.new(0.3,0,0.8,0)b.Position=UDim2.new(0.6,5,0.1,0)b.BackgroundColor3=self.colors.bindButton b.BorderSizePixel=0 b.Text=tostring(d):gsub("Enum.KeyCode.","")or"None"b.TextColor3=self.colors.text b.Font=Enum.Font.Gotham b.TextSize=12 b.Parent=f local c=Instance.new("UICorner")c.CornerRadius=UDim.new(0,4)c.Parent=b local s=s or false f.InputBegan:Connect(function(i)if not self:shouldProcessInput()then return end if i.UserInputType==Enum.UserInputType.MouseButton1 then s=not s t.BackgroundColor3=s and self.colors.toggleOn or self.colors.toggleOff if c then c(s)end end end)b.MouseButton1Click:Connect(function()if self.modalWindowOpen then return end if self.waitingForBind then self.waitingForBind.button.Text=tostring(self.waitingForBind.currentKey):gsub("Enum.KeyCode.","")end self.waitingForBind={button=b,callback=function(k)for _,b in ipairs(self.currentSection.buttons)do if b.id==i then b.currentKey=k break end end end,currentKey=d}b.Text="[Press any key]"end)table.insert(self.currentSection.buttons,{type="BindToggleButton",text=t,callback=c,id=i,currentState=s,currentKey=d})table.insert(self.controls,f)f.Parent=self.contentFrame return{frame=f,toggle=t,bindButton=b,id=i}end function MM:shouldProcessInput()return not self.modalWindowOpen and not self.waitingForBind end function MM:TextBoxButton(t,p,c,b)local i="TextBoxButton_"..t if not self.currentSection then return end local c=self:createTextBoxButton(t,p,c,i,"")if b then local b=c.InputContainer.ActivateButton if b then b.Text=b end end table.insert(self.currentSection.buttons,{type="TextBoxButton",text=t,placeholder=p,callback=c,id=i,currentText=""})table.insert(self.controls,c)c.Parent=self.contentFrame return{frame=c,textBox=c.InputContainer.TextBox,button=c.InputContainer.ActivateButton,id=i}end function MM:setColor(n,v)if self.colors[n]then self.colors[n]=v if self.colorPickers[n]then self.colorPickers[n].ColorBox.BackgroundColor3=v end self:updateColors()end end function MM:updateColors()self.mainFrameInstance.BackgroundColor3=self.colors.background self.mainFrameInstance.TopBar.BackgroundColor3=self.colors.topBar self.mainFrameInstance.TopBar.Title.TextColor3=self.colors.text self.mainFrameInstance.TopBar.CloseButton.TextColor3=self.colors.text self.mainFrameInstance.TopBar.SettingsButton.TextColor3=self.colors.text self.mainFrameInstance.SectionsFrame.BackgroundColor3=self.colors.sectionBackground self.mainFrameInstance.ContentFrame.ScrollBarImageColor3=self.colors.accent self.settingsFrame.SettingsFrame.BackgroundColor3=self.colors.background self.settingsFrame.SettingsFrame.TopBar.BackgroundColor3=self.colors.topBar self.settingsFrame.SettingsFrame.TopBar.Title.TextColor3=self.colors.text self.settingsFrame.SettingsFrame.TopBar.CloseButton.TextColor3=self.colors.text self.settingsFrame.SettingsFrame.ContentFrame.ScrollBarImageColor3=self.colors.accent self:updateContent()end function MM:destroy()if self.inputConnection then self.inputConnection:Disconnect()end self.mainFrame:Destroy()self.settingsFrame:Destroy()end return MM
